(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1699d96c"],{"263d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-row",[s("b-col",{staticClass:"d-flex justify-content-between "},[s("div",{staticClass:"page-header"},[s("h4",[t._v(t._s(t.$t("posts.post list")))])]),t._v(" "),s("b-btn",{staticClass:"align-self-start",attrs:{variant:"primary rounded-pill",to:"/posts/create"}},[s("span",{staticClass:"fas fa-plus-circle"}),t._v(" "+t._s(t.$t("posts.create post")))])],1)],1),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("b-form-group",[s("b-input",{staticClass:"d-inline-block w-auto float-sm-right",attrs:{size:"sm",placeholder:"Search..."},on:{input:function(e){return t.filter(e)}}})],1)],1)]),t._v(" "),s("b-table",{ref:"myTable",staticClass:"table nexus-table",attrs:{hover:"",selectable:"",borderless:"",items:t.postsTableData,"current-page":t.currentPage,"per-page":t.perPage,fields:t.tableFields},on:{"row-selected":t.rowSelected},scopedSlots:t._u([{key:"cell(postImage)",fn:function(e){return[s("img",{staticClass:"post-table-image",attrs:{src:e.value,with:"75",height:"75"},on:{click:function(s){return t.previewImage(e.value)}}})]}},{key:"cell(details)",fn:function(e){return["Taslak"==e.item.status?s("span",{staticClass:"fas fa-broadcast-tower",attrs:{title:"Publish"},on:{click:function(s){return t.goToPostLink(e)}}}):t._e(),t._v(" "),"Aktif"==e.item.status?s("span",{staticClass:"fab fa-firstdraft mr-2 text-primary",attrs:{title:"Draft"},on:{click:function(s){return t.goToPostLink(e)}}}):t._e(),t._v(" "),s("span",{staticClass:"far fa-edit mr-2 text-primary",attrs:{title:"Edit Post"},on:{click:function(s){return t.goToPost(e)}}}),t._v(" "),s("span",{staticClass:"fas fa-times text-danger",attrs:{title:"Delete Post"},on:{click:function(s){return t.deletePost(e)}}})]}}])}),t._v(" "),s("b-row",[s("b-col",[s("div",{staticClass:"col-sm text-sm-left text-center mb-3 mb-sm-0"},[t.totalPages?s("span",{staticClass:"text-muted"},[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]):t._e()]),t._v(" "),s("div",{staticClass:"col-sm"},[t.totalItems?s("b-pagination",{staticClass:"justify-content-center justify-content-sm-end",attrs:{"total-rows":t.totalItems,"per-page":t.perPage,size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.previewToggle,expression:"previewToggle"}],staticClass:"preview-container",on:{click:function(e){t.previewToggle=!1}}},[s("span",{staticClass:"close"},[t._v("Ã—")]),t._v(" "),s("div",{attrs:{id:"preview"}},[s("img",{staticClass:"preview-image",attrs:{src:t.previewImageUrl},on:{click:function(e){t.previewToggle=!1}}})]),t._v(" "),s("div",{staticClass:"caption"},[t._v("\n    "+t._s(t.previewImageName)+" \n  ")])])],1)},i=[],o=(s("159b"),s("fb6a"),s("1276"),s("ac1f"),s("4de4"),s("c975"),s("a15b"),s("d81d"),s("bc3a")),l=s.n(o),r=s("c1df"),n=s.n(r);s("41e9");n.a.locale("tr");var c={name:"posts",metaInfo:{title:"Posts"},data:function(){return{posts:[],postsTableData:[],previewImageUrl:null,previewImageName:"",previewToggle:!1,selectedRows:[],perPage:10,currentPage:1}},computed:{tableFields:function(){return[{key:"order",label:this.translateCol("post order"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"postImage",label:this.translateCol("post image"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"Baslik",label:this.translateCol("post header"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"date",label:this.translateCol("creation date"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"owner",label:this.translateCol("creator"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"views",label:this.translateCol("reads"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"language",label:this.translateCol("languages"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"status",label:this.translateCol("status"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"},{key:"details",label:this.translateCol("details"),sortable:!0,sortDirection:"desc",class:"text-center align-middle"}]},totalItems:function(){return this.postsTableData.length},totalPages:function(){return Math.floor(this.totalItems/this.perPage)||(this.totalItems?1:0)}},created:function(){var t=this;l.a.post("https://defensehere.herokuapp.com/get_posts/",{}).then((function(e){console.log(e.data),t.posts=e.data,t.posts.forEach((function(e){var s={id:e._id.slice(-4),date:n()(e.date).format("DD/MM/YYYY, h:mm:ss a"),status:e.isDraft?"Taslak":"Aktif",postImage:"https://defensehere.herokuapp.com/images/"+e.postImage,Baslik:e.postTitle,details:e._id,order:e.postOrder||"---",owner:e.owner||"---",views:""+e.views||"---",language:String(null===e||void 0===e?void 0:e.postLanguage).slice(-4)||"---"};t.postsTableData.push(s)})),t.originalPostsTableData=t.postsTableData}))},methods:{translateCol:function(t){return this.$i18n.t("posts."+t)},rowSelected:function(t){this.selectedRows=t,console.log(t)},goToPost:function(){var t=this,e=[];t.selectedRows.forEach((function(s){console.log(s),t.posts.forEach((function(t){t._id.slice(-4)==s.id&&e.push(t)}))})),1==e.length&&(console.log(e),this.$router.push({name:"Posts Edit",params:{id:e[0]._id}}))},deletePost:function(t){if(confirm("Haber Siliniyor. Emin Misiniz?")){var e=this,s={};s.id=t.value,l.a.post("https://defensehere.herokuapp.com/delete_post",{data:s}).then((function(t){console.log(t.data),"success"==t.data&&e.$notify({type:"success",text:"Haber Basariyle Silindi!"})}))}},goToPostLink:function(t){console.log(t);var e=this.$router.resolve({name:"Post",params:{id:t.value}});window.open(e.href,"_blank")},clickRows:function(t){var e=this.$refs.myTable.$el,s=e.getElementsByTagName("tbody")[0],a=s.getElementsByTagName("tr");t.forEach((function(t){a[t].click()})),console.log("items")},previewImage:function(t){var e=this;e.previewToggle=!e.previewToggle,e.previewImageUrl&&(e.previewImageUrl=null),e.previewImageUrl=t,e.previewImageName=t.split("/").pop()},filter:function(t){var e=t.toLowerCase(),s=this.originalPostsTableData.filter((function(t){return-1!==Object.keys(t).map((function(e){return String(t[e])})).join("|").toLowerCase().indexOf(e)||!e}));this.postsTableData=s}}},d=c,p=(s("4a6d"),s("2877")),u=Object(p["a"])(d,a,i,!1,null,"1cba1e4c",null);e["default"]=u.exports},"41e9":function(t,e,s){},"4a6d":function(t,e,s){"use strict";s("cb5d")},cb5d:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1699d96c.36e99729.js.map