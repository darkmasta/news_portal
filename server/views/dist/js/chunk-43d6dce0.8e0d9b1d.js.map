{"version":3,"sources":["webpack:///./src/pages/admin/Quotes.vue?50f7","webpack:///src/pages/admin/Quotes.vue","webpack:///./src/pages/admin/Quotes.vue?a45f","webpack:///./src/pages/admin/Quotes.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","on","$event","filter","ref","striped","bordered","borderless","outlined","small","hover","dark","fixed","footClone","noCollapse","quotesTableData","fields","headVariant","tableVariant","rowSelected","selectedQuotes","length","staticStyle","goToQuote","_e","staticRenderFns","a","name","metaInfo","title","props","key","sortable","component"],"mappings":"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","file":"js/chunk-43d6dce0.8e0d9b1d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-row',[_c('b-col',[_c('h3',[_vm._v(\"Admin View/Update Quote\")])])],1),_vm._v(\" \"),_c('b-row',[_c('b-col',[_c('b-card',{staticClass:\"mt-2\",attrs:{\"no-body\":\"\"}},[_c('b-card-body',[_c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"}),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_c('b-form-group',[_c('b-input',{staticClass:\"d-inline-block w-auto float-sm-right\",attrs:{\"size\":\"sm\",\"placeholder\":\"Search...\"},on:{\"input\":function($event){return _vm.filter($event)}}})],1)],1)]),_vm._v(\" \"),_c('b-table',{ref:\"myTable\",attrs:{\"selectable\":\"\",\"striped\":_vm.striped,\"bordered\":_vm.bordered,\"borderless\":_vm.borderless,\"outlined\":_vm.outlined,\"small\":_vm.small,\"hover\":_vm.hover,\"dark\":_vm.dark,\"fixed\":_vm.fixed,\"foot-clone\":_vm.footClone,\"no-border-collapse\":_vm.noCollapse,\"items\":_vm.quotesTableData,\"fields\":_vm.fields,\"head-variant\":_vm.headVariant,\"table-variant\":_vm.tableVariant},on:{\"row-selected\":_vm.rowSelected}}),_vm._v(\" \"),(_vm.selectedQuotes.length == 1)?_c('b-btn',{staticClass:\"p-3 px-5 mt-4\",staticStyle:{\"float\":\"right\",\"margin-left\":\"25px\"},attrs:{\"size\":\"lg\",\"variant\":\"warning\"},on:{\"click\":function($event){return _vm.goToQuote()}}},[_vm._v(\"Edit Selected Quote!\")]):_vm._e()],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n      <b-row>\n      <b-col>\n        <h3>Admin View/Update Quote</h3>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n        <b-card class=\"mt-2\" no-body>\n          <b-card-body>\n            <div>\n              <div class=\"row\">\n                <div class=\"col\">\n                </div>\n                <div class=\"col\">\n                  <b-form-group>\n                    <b-input size=\"sm\"  placeholder=\"Search...\" class=\"d-inline-block w-auto float-sm-right\" @input=\"filter($event)\" />\n                  </b-form-group>\n                </div>\n              </div>\n                  <b-table\n                    selectable\n                    :striped=\"striped\"\n                    :bordered=\"bordered\"\n                    :borderless=\"borderless\"\n                    :outlined=\"outlined\"\n                    :small=\"small\"\n                    :hover=\"hover\"\n                    :dark=\"dark\"\n                    :fixed=\"fixed\"\n                    :foot-clone=\"footClone\"\n                    :no-border-collapse=\"noCollapse\"\n                    :items=\"quotesTableData\"\n                    :fields=\"fields\"\n                    :head-variant=\"headVariant\"\n                    :table-variant=\"tableVariant\"\n                    @row-selected=\"rowSelected\" ref=\"myTable\" \n                  >\n                  </b-table>\n\n                  <b-btn class=\"p-3 px-5 mt-4\" size=\"lg\" variant=\"warning\" \n                            style=\"float: right; margin-left: 25px;\"\n                            v-if=\"selectedQuotes.length == 1\"\n                            @click=\"goToQuote()\">Edit Selected Quote!</b-btn>\n            </div>\n\n          \n          </b-card-body>\n        </b-card>\n      </b-col>\n    </b-row>\n  \n</div>\n</template>\n<script>\nimport Vue from \"vue\";\nimport axios from \"axios\";\nimport AxiosPlugin from \"vue-axios-cors\";\nimport _ from \"underscore\";\nimport $ from \"jquery\";\nimport loadCustomers from \"@/mixins/loadCustomers\";\nimport VueTypeahead from \"vue-typeahead\";\nimport moment from \"moment\"\n\nVue.use(axios);\n\naxios.defaults.withCredentials = true;\nVue.use(AxiosPlugin);\n// Set up $hhtp client (required by vue-typeahead)\nVue.prototype.$http = axios\n\nimport 'vue-search-select/dist/VueSearchSelect.css'\n\nexport default {\n  name: \"quotes\",\n  metaInfo: {\n    title: \"Quotes\",\n  },\n  props: {\n      model: {\n        type: Object,\n        default ()  {\n          return {};\n        }\n      }\n    },\n    data() {\n      return {\n        value: \"\",\n        fields: [{ key: 'Id', sortable: true}, { key: 'Created', sortable: true} ,  { key: 'Shipper', sortable: true} ,\n                 { key: 'Vehicle',sortable: true}, { key: 'Origin_Destination', sortable: true}, { key: 'First_Avalaible', sortable: true} ,\n                 { key: 'Tariff', sortable: true}, { key: 'Carrier_Pay', sortable: true}, { key: 'Status', sortable: true}],\n        quotesTableData: [], \n        originalQuotesTableData: [], \n        loading: false,\n        editOrigin: false,\n        selectedQuotes: [],\n        limit: 5,\n        minChars: 3,\n        zipCode: \"\",\n        city: \"\",\n        state: \"\",\n        dZipCode: \"\",\n        dCity: \"\",\n        dState: \"\",\n        year: null,\n        carModel: \"\",\n        make: \"\",\n        address: \"\",\n        customers: [],\n        vin: \"\",\n        showPriceTab: false,\n        economyPrice: 0,\n        standardPrice: 0,\n        expeditedPrice: 0,\n        totalPrice: 0,\n        selectedPrice: 0,\n        quoteId: 0,\n        ownerEmail: \"\",\n        owner: \"\",\n        quotes: [],\n        prices: [\n          { text: \"Economy\", value: \"0\" },\n          { text: \"Standard\", value: \"1\" },\n          { text: \"Expedited\", value: \"2\" },\n        ],\n        selectedPriceOption: \"\",\n        profit: 0,\n        items: {\n          value: \"\",\n          text: \"\",\n        },\n        striped: false,\n        bordered: false,\n        borderless: false,\n        outlined: true,\n        small: false,\n        hover: true,\n        dark: false,\n        fixed: false,\n        footClone: false,\n        headVariant: 'light',\n        tableVariant: '',\n        noCollapse: false\n    };\n    }, \n    mixins: [loadCustomers],\n    components: {\n    },\n    created() {\n      var vm = this\n       axios.post(process.env.VUE_APP_SERVER_URL + '/get_customers/')\n                .then(response => { \n                    var data = response.data\n                    //console.log(data)\n                    vm.customers = data\n                    _.each(data, function(customer, index) { \n                      var tmp_quote = {\n                        value: 0,\n                        text: ''\n                      }\n                      tmp_quote.value = index;\n                      tmp_quote.text = customer.fullName;\n                      vm.options.push(tmp_quote)\n                    })\n                })\n\n       axios.post(process.env.VUE_APP_SERVER_URL + '/get_quotes/')\n                .then(response => { \n                    var data = response.data\n                    console.log(data)\n                    vm.quotes = data\n                    data.forEach((quote) => {\n                      var tmp_quote = {\n                        Id: quote._id.slice(-4),\n                        Created: moment(quote.date).fromNow(),\n                        Origin_Destination: quote.originZipCode + ' -> ' +quote.destinationZipCode,\n                        First_Avalaible: '----',\n                        Tariff: '$' + quote.profit,\n                        Carrier_Pay: '$' + quote.price,\n                        Status: 'active',\n                        Shipper: quote.ownerEmail,\n                        Vehicle: quote.vin,\n                      }\n                      vm.quotesTableData.push(tmp_quote)\n                    })\n                    vm.originalQuotesTableData = vm.quotesTableData\n\n                    })\n\n        axios.get(process.env.VUE_APP_SERVER_URL + '/user').then(\n          (response) => {\n            var userData = response.data\n            //console.log(userData)\n            vm.profit = userData.defaultProfit\n            vm.city = userData.city\n            vm.state = userData.state\n            vm.zipCode = userData.zip\n          },\n          (response) => {\n            console.log(response)\n          }\n          )\n    },\n    events: {\n        click: function(data) {\n            console.log(data)\n        }\n    },\n    watch: {\n    },\n    methods: {\n      goToQuote() {\n        var vm = this\n        var quoteData = []\n        vm.selectedQuotes.forEach( selectedQuote => {\n          vm.quotes.forEach( quote => {\n            if (quote._id.slice(-4) == selectedQuote.Id) {\n              quoteData.push(quote)\n            }\n          })\n        })\n        if (quoteData.length == 1) {\n          this.$router.push({ name: 'Quote', params: { id: quoteData[0]._id } })\n        }\n      },\n      rowSelected(items) {\n        this.selectedQuotes = items\n        console.log(items)\n      },\n      clickRows(which) {\n        let myTable = this.$refs.myTable.$el,\n            tableBody = myTable.getElementsByTagName('tbody')[0],\n            tableRows = tableBody.getElementsByTagName('tr')\n        which.forEach(idx => {\n          tableRows[idx].click()\n        })\n        console.log(\"items\")\n      },\n      totalPriceCalc() {\n        var vm = this;\n        return Number(vm.profit) + Number(vm.selectedPrice);\n      },\n      updateQuery() {\n        this.query = this.value;\n        this.update();\n      },\n      onHit(item) {\n        this.value = item.screen_name;\n        this.reset();\n      },\n      resetInput() {\n        this.value = \"\";\n        this.reset();\n      },\n      lookupZip: _.debounce(function() {\n        var vm = this\n        vm.city = \"Searching...\"\n\n        var data = {zipCode: vm.zipCode}\n        \n        axios.post(process.env.VUE_APP_SERVER_URL + '/decode_zip/', {data})\n            .then(function (response){\n                vm.city = response.data.city \n                vm.state = response.data.state\n              })\n            .catch(function (error){\n                vm.city = \"Invalid Zipcode\"\n                vm.state = \"Invalid Zipcode\"\n              })\n      }, 1000),\n      lookupZip2: _.debounce(function() {\n        var vm = this\n        vm.dCity = \"Searching...\"\n\n        var data = {zipCode: vm.dZipCode}\n        \n        axios.post(process.env.VUE_APP_SERVER_URL + '/decode_zip/', {data})\n            .then(function (response){\n                vm.dCity = response.data.city \n                vm.dState = response.data.state\n              })\n            .catch(function (error){\n                vm.dCity = \"Invalid Zipcode\"\n                vm.dState = \"Invalid Zipcode\"\n              })\n      }, 1000),\n      getQuote: function(model) {\n            var vm = this\n            var data = {} \n            data = model\n            data.vin = vm.vin\n            data.year = vm.year\n            data.model = vm.carModel\n            data.make = vm.make\n            data.destinationCity = vm.dCity\n            data.destinationState = vm.dState\n            data.destinationZipCode = vm.dZipCode \n            data.zipCode = vm.zipCode \n            data.state = vm.state \n            data.city = vm.city \n            console.log(data)\n            var query = {\n              \"carCondition\": \"1\",\n              \"transportType\": \"1\",\n              \"vehicleMake\": data.make,\n              \"vehicleModel\": data.model,\n              \"vehicleYear\": data.year,\n              \"zipDrop\": Number(data.destinationZipCode),\n              \"zipPick\": data.zipCode\n            }\n\n            console.log(query)\n\n            axios.post('https://nexusv.d.brainwork.lv/api/calculations', query).then(response => {\n              console.log(response)\n              vm.economyPrice = response.data.data.result.quote.economy\n              vm.standardPrice = response.data.data.result.quote.standard\n              vm.expeditedPrice = response.data.data.result.quote.expedited\n              vm.showPriceTab = true\n            },\n            response => {\n            })\n          },\n      showDetails() {\n        return true;  \n      },\n      myRowClickHandler(record, index) {\n        // 'record' will be the row data from items\n        // `index` will be the visible row number (available in the v-model 'shownItems')\n        //console.log(record); // This will be the item data for the row\n        console.log(record)\n        this.selectedQuote = record\n      },\n      reset () {\n        this.item = {}\n      },\n      filter (value) {\n        const val = value.toLowerCase()\n        console.log(value)\n\n        // filter our data\n        const filtered = this.originalQuotesTableData.filter(d => {\n          // Concat data\n          return Object.keys(d)\n            .map(k => String(d[k]))\n            .join('|')\n            .toLowerCase()\n            .indexOf(val) !== -1 || !val\n        })\n        // update the rows\n        this.quotesTableData = filtered\n      } \n    },\n    computed: {\n      totalItems () {\n        return this.quotesTableData.length\n      },\n      totalPages () {\n        return Math.floor(this.totalItems / this.perPage) || (this.totalItems ? 1 : 0)\n      },\n      tableFields () {\n        if (!this.jsonData[0]) return []\n        return Object.keys(this.quotesTableData[0]).map(key => ({\n          key,\n          sortable: this.isSortable\n        }))\n      }\n    }\n  }\n</script>\n\n<style scss>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quotes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Quotes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Quotes.vue?vue&type=template&id=85436946&\"\nimport script from \"./Quotes.vue?vue&type=script&lang=js&\"\nexport * from \"./Quotes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}